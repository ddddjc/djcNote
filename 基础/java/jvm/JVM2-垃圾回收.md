# 垃圾回收

## 1. 如何判断对象了可以回收

### 1.1引用计数法

- 给每个对象一个计数器，如果被引用一次就+1，少被引用则-1.
- 可能会有对象产生环形相互依赖，这样外面没有被引用，但无法被回收

### 1.2可达性分析算法

1. 确定一系列根对象（不能被垃圾回收的对象）
2. 扫描堆中的对象，看是否能沿着GC Root对象为起点的引用链找到该对象，找不到，表示可以回收

### 1.3 四种引用

`有五种`

1. 强引用
   - 只有所有GC Root对象都不通过【强引用】引用该对象，该对象才能被垃圾回收
2. 软引用（SoftReference）
   - 仅有软引用引用该对象时，在垃圾回收后，内存仍不足时会再次触发垃圾回收，回收软引用对象
   - 可以配合引用队列来释放引用自身
3. 弱引用（WeakReference）
   - 仅有弱引用引用该对象时，在垃圾回收时，无论内存是否充足，都会回收弱引用对象
   - 可以配合引用队列来释放弱引用自身
4. 虚引用（PhantomReference）
   - 必须配合引用队列使用，主要配合ByteBuffer使用，被引用对象回收时，会将虚引用入队，由Reference Handler 线程调用虚引用相管方法释放直接内存
5. 终接器引用（FinalReference）
   - 无需手动编码，但内部配合引用队列使用，在垃圾回收时，终接器应用入队（被引用对象暂时没有被回收），再由Finalizer线程通过终接器引用找到被引用对象并调整他的finalize方法，第二层GC时才能回收被引用对象。

## 2. 垃圾回收、

### 2.1 标记清除算法

### 2.2 标记整理算法

### 2.3 复制算法
